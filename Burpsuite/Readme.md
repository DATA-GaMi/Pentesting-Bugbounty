Credit: Vikram -team ResetHacker

**Q: What is Burp and why is it important for penetration testing?**

  Web application penetration testing tool developed in JAVA also know as "Interception Proxy" tool because allows you to inspect, modify, replay, etc to web requests. 
  It has a vast amount of plugins to aid in the identification and exploitation of bugs but its real power comes from allowing attackers the ability to inspect and manipulate raw HTTP requests.

**Enterprise - Professional - Community**

	Burp Suite - basic features such as proxy, repeater, intruder, decoder, comparer etc.
	BurpSuite - Advance features such as Extender, scanner, sequencer, collaborator, infiltrator etc

### Download and run
* Download [Burp Suite](https://portswigger.net/burp/communitydownload)
* Run in terminal
```
To run Burp, you will need Java version 11 to 17. 
java -version
java -jar -Xmx4g /path/to/burp.jar
```

![burpsuite hotkeys](https://user-images.githubusercontent.com/25515871/177658512-18b7310b-98a2-4462-b353-30a4c0b13c42.jpg)


**Burp-Proxy-Setup**
	The proxy tab is probably the most important tab in Burp. This is where you can see all of your traffic that passes by the Burp proxy.
	
		○ To check Proxy is listening in burp :
		Open BurpSuite > Proxy > options > Running (Ticked)
		○ Force your browser to route its traffic through the Burp proxy:
		Browsers setting > Network setting - connection setting - Manual Proxy Configuration
		(IP: 127.0.0.1  and Port : 8080)
		○ Imported the Burp certificate in your browser:
		Type https://burp in browser and download the certificate.
		Settings > Import the CA certificate >  tick all the option & save it.
	
**Note that,** 
    
    ○ Normally people turn “intercept” to off ( to avoid manually forward for each request ) and rather view the traffic in the “HTTP History” tab. only turn “intercept” to on when trying to isolate requests from a specific feature.
    ○ HTTP History is where people spend 80% of my time looking for something that peaks my interest. When looking at the traffic I'm mostly paying attention to the method,url, and MIME type fields. Why? 
	○ Because when I see a POST method being used I think of Stored XSS, Cross site request forgery, and many more vulnerabilities. When I see a URL with an email, username,or id in it I think IDOR. When I see a JSON MIME type I think back-end API. Most of this knowledge of knowing what to look for comes with experience.
	○ One functionality that people use to find a lot of vulnerabilities and make my life easier is the search feature. Basically you can search for a word(s) across all of your Burp traffic.
		For example I may search for the word “url=” this should show me all requests which have the parameter URL in it, I can then test for Server Side Request Forgery (SSRF) or open redirect vulnerabilities. I might also search for the header “Access-Control-Allow-Origin” or the“callback=” GET parameter when testing for Same Origin Policy (SOP) bypasses. 

**Export subdmains from file to Burp suite**
Export subdmains from file to Burp suite by [@tvmpt](https://twitter.com/tvmpt)

```cat <file-name> | parallel -j 200 curl -L -o /dev/null {} -x 127.0.0.1:8080 -k -s```

# Recon with BurpSuite
**Credit : https://github.com/ghsec/webHunt/**

### Set scope
* Scope --> Use advansed scope control --> Add --> host or IP range == target

![Scope](https://github.com/ghsec/webHunt/blob/master/Img/Screenshot%20from%202019-05-10%2002-25-10.png)

### Spidering 
* Select all host in sitemap and Spider. 
* Do it again and again if new hosts are noticed.

### Recon for new Subdomains
* Collect new subdimains which is not detected by spider. in request | response body.
```
(http[s]?:\/\/)?((-)?[\w+\.]){1,20}domain\.com
```
Note: click + button and check regex && Auto-scroll to match when text changes

![ReconSubdomain](https://github.com/ghsec/webHunt/blob/master/Img/Screenshot%20from%202019-05-10%2002-40-35.png)

### Extract endpoints from js file
note: regex taken from Linkfinder by GerbenJavado
```
(?:"|')(((?:[a-zA-Z]{1,10}://|//)[^"'/]{1,}\.[a-zA-Z]{2,}[^"']{0,})|((?:/|\.\./|\./)[^"'><,;| *()(%%$^/\\\[\]][^"'><,;|()]{1,})|([a-zA-Z0-9_\-/]{1,}/[a-zA-Z0-9_\-/]{1,}\.(?:[a-zA-Z]{1,4}|action)(?:[\?|/][^"|']{0,}|))|([a-zA-Z0-9_\-]{1,}\.(?:php|asp|aspx|jsp|json|action|html|js|txt|xml)(?:\?[^"|^']{0,}|)))(?:"|')
```
![Endpoints](https://github.com/ghsec/webHunt/blob/master/Img/Screenshot%20from%202019-05-10%2009-56-26.png)

### Internal | External IP address
```
\b(?:[0-9]{1,3}\.){3}[0-9]{1,3}\b
```
![IP](https://github.com/ghsec/webHunt/blob/master/Img/Screenshot%20from%202019-05-10%2010-08-11.png)


-------------------------------------------------------------------------------------------------------------------------------
Credit: Vikram -team ResetHacker

**2.Target -> SITEMAP** 

    ○ Sitemap becomes fairly useful when hitting an undocumented API endpoint as this view allows you to build a picture of the possible endpoints. You can also view the HTTP requests in this tab, clicking on a folder in the sitemap will only show requests from that path. 

	
**3.Intruder:**
		
    ○ If you're doing any fuzzing or brute forcing with Burp you're probably doing it in the “intruder” tab. When you find an interesting request right click it then click “Send to Intruder”
		
		  Goto "Intruder" > Click "Clear"> Now from here your steps vary depending on what you're trying to do,
		  Eg: we are trying to do some parameter fuzzing. One of the first things we need to do is select the value we are trying to modify. This can be done by highlighting the value and pressing the “Add” button. Since we are attempting to do parameter fuzzing this is the value that will be replaced with our fuzzing payloads. 
		
		You may have also noticed the “Attack type” drop down menu is set to “Sniper”, there are four different attack types which are described in the table below: 
			i. Sniper Uses a single payload list; Replaces one position at a time; 
			ii. Battering ram Uses a single payload list; Replaces all positions at the same time; Once you have selected your attack type and the value to be modified click on the “Payloads” sub tab as shown below: 
			iii. Pitchfork Each position has a corresponding payload list; So if there are two positions to be modified they each get their own payload list. 
			iv. Cluster Bomb Uses each payload list and tires different combinations for each position.
		Once you have selected your attack type and the value to be modified click on the “Payloads” sub tab.Here we want to select our payload type and the payload list. 
		As for my payload list we want a list of fuzzing values. For this example im just going to use the default lists that comes with Burp but there are some other good lists on SecLists: 
		● https://github.com/danielmiessler/SecLists/tree/master/Fuzzing
		Now to use Burps pre defined list just click the “Add from list” drop down menu and select one.
		Now that you have your fuzzing list imported all that you have to do is press “Start attack”.
		The next step is to inspect the HTTP responses to determine if there is anything suspicious. However, most professionals don't use intruder, they use a plugin called “Turbo Intruder”
	
**4.Repeater:**
     
     ○ Repeater modify and replay and request you do it in the repeater tab. the request to test for vulnerabilities and security misconfigurations.
	   You might have noticed that at the top there are a bunch of different tabs with numbers on them. By default every request you send to the repeater will be assigned a number. Whenever I find something interesting I change this value so I can easily find it later, that's why one of the tabs is labeled SSRF,it’s a quick easy way to keep a record of things. 
	

**5.Burp Collaborator:**

      ○ A network service which helps to discover blind vulnerabilities such as SQL injection, XML injection, cross-site scripting, code enjection  etc
     
      
![burpcollabrator](https://user-images.githubusercontent.com/25515871/176586154-99f71311-4a8d-4dcb-90ff-8fd8dff48a46.png)

        

    
**6.Burp Recommended Extensions:**
Burp Extender lets you enhance Burp's functionality by installing extensions created by the community, or even writing your own. 
BurpSuite > Extender > BApp Store 

Burp extensions can customize and extend Burp Suite's behavior in numerous ways. Few recommended tools are
	
![burpsuite recommanded tools](https://user-images.githubusercontent.com/25515871/176586231-3671f592-f870-4583-a05d-d33d3f4a87d3.png)

